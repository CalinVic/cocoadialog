os: osx
language: objective-c
osx_image: xcode9
xcode_workspace: cocoadialog.xcworkspace
xcode_sdk: macosx10.13

before_install:
  - brew update

install:
  - brew outdated xctool || brew upgrade xctool
  - brew upgrade yarn 2>/dev/null || brew install yarn
  - yarn
  - rm -rf ~/.nvm && curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.5/install.sh | bash && cd ~/.nvm && source ~/.nvm/nvm.sh && nvm install 8.7.0
  - node -v
  - /usr/bin/env node -v
  - gem install xcpretty --no-rdoc --no-ri --no-document --quiet
  - gem install xcpretty-travis-formatter --no-rdoc --no-ri --no-document --quiet

script:
  - ./Scripts/build

after_success:
  - bash <(curl -s https://codecov.io/bash) -J '^cocoadialog$'
  - ./Scripts/success

notifications:
  slack:
    secure: G5I3v9A1PtH3pb2l4zE9fip3KsuToVt0UGl2tQ4H6MEdA3RN0ioHOkEXG/t7clM+zvcKd2yugTYZYySVYjo8YYOc90s5BpJGpJ4ASgp1xwnd/iQgtKhuouRSDib2Ys5LwB0lL8Qds+FcD33OHrQNH06VD5T3dwhlidTjUPONtxQ=
